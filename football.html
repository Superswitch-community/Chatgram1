<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dream Web League 11v11</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
</head>
<body class="bg-green-800 flex flex-col items-center justify-center min-h-screen">

<!-- Scoreboard -->
<div class="flex justify-center gap-16 mb-4 text-white text-2xl font-bold">
    <div>Player Team: <span id="playerScore">0</span></div>
    <div>AI Team: <span id="aiScore">0</span></div>
</div>

<!-- Phaser Game Container -->
<div id="gameContainer" class="border-4 border-white rounded-xl shadow-xl"></div>

<script>
let config = {
    type: Phaser.AUTO,
    width: 1000,
    height: 600,
    parent: 'gameContainer',
    physics: {
        default: 'arcade',
        arcade: { gravity: { y: 0 }, debug: false }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

let game = new Phaser.Game(config);

let player;
let cursors;
let ball;
let teammates = [];
let opponents = [];
let playerScore = 0;
let aiScore = 0;

function preload() {
    this.load.image('pitch', 'https://i.imgur.com/6s2jU0M.png'); // stylized pitch
    this.load.image('player', 'https://i.imgur.com/Z7C2d1L.png'); // blue player
    this.load.image('opponent', 'https://i.imgur.com/hxD6u8x.png'); // red opponent
    this.load.image('ball', 'https://i.imgur.com/j6u8dE0.png'); // ball
}

function create() {
    this.add.image(500, 300, 'pitch');

    // Create ball
    ball = this.physics.add.image(500, 300, 'ball');
    ball.setCollideWorldBounds(true);
    ball.setBounce(0.9);

    // Create main player
    player = this.physics.add.image(200, 300, 'player');
    player.setCollideWorldBounds(true);

    // Create teammates
    for(let i=0; i<10; i++){
        let x = 100 + Math.random()*200;
        let y = 50 + Math.random()*500;
        let mate = this.physics.add.image(x, y, 'player');
        mate.setCollideWorldBounds(true);
        teammates.push(mate);
    }

    // Create opponents
    for(let i=0; i<11; i++){
        let x = 600 + Math.random()*300;
        let y = 50 + Math.random()*500;
        let opp = this.physics.add.image(x, y, 'opponent');
        opp.setCollideWorldBounds(true);
        opponents.push(opp);
    }

    // Collisions
    this.physics.add.collider(player, ball, kickBall, null, this);
    this.physics.add.collider(teammates, ball, kickBall, null, this);
    this.physics.add.collider(opponents, ball, kickBall, null, this);

    // Input
    cursors = this.input.keyboard.createCursorKeys();

    // Goal areas
    this.goalLeft = new Phaser.Geom.Rectangle(0, 250, 50, 100);
    this.goalRight = new Phaser.Geom.Rectangle(950, 250, 50, 100);
}

function update() {
    // Player movement
    player.setVelocity(0);
    if(cursors.left.isDown) player.setVelocityX(-200);
    if(cursors.right.isDown) player.setVelocityX(200);
    if(cursors.up.isDown) player.setVelocityY(-200);
    if(cursors.down.isDown) player.setVelocityY(200);

    // Simple AI for opponents
    opponents.forEach(opp => {
        this.physics.moveToObject(opp, ball, 100);
    });

    // Simple AI for teammates
    teammates.forEach(tm => {
        this.physics.moveToObject(tm, ball, 80);
    });

    // Goal detection
    if(Phaser.Geom.Rectangle.ContainsPoint(this.goalRight, ball)){
        playerScore++;
        document.getElementById('playerScore').innerText = playerScore;
        resetBall();
    }
    if(Phaser.Geom.Rectangle.ContainsPoint(this.goalLeft, ball)){
        aiScore++;
        document.getElementById('aiScore').innerText = aiScore;
        resetBall();
    }
}

function kickBall(playerObj, ballObj){
    let dx = ball.x - playerObj.x;
    let dy = ball.y - playerObj.y;
    let angle = Math.atan2(dy, dx);
    ball.setVelocity(Math.cos(angle)*300, Math.sin(angle)*300);
}

function resetBall(){
    ball.setPosition(500, 300);
    ball.setVelocity(0,0);
}

</script>
</body>
</html>
